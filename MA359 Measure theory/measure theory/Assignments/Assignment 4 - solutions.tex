\documentclass[11pt]{article}

\usepackage{mathtools}
\usepackage{amsmath, amsthm, amsfonts,amssymb}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{tikz}
\usepackage[utf8]{inputenc}
\usepackage{esint}
\usepackage{mathrsfs}
\usepackage{subfig,float}
\usepackage[T1]{fontenc}
\usepackage{mathrsfs}  
\usepackage{bbm} 
\usepackage{enumitem}
\usepackage{enumerate}
\usepackage{mathtools}
\usepackage{dsfont}
\newcommand{\set}[1]{\left\{#1\right\}}

\def\grad{\nabla}
\DeclareMathOperator{\dive}{div}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\essup}{ess\,sup}
\DeclareMathOperator{\Lip}{Lip}
\DeclareMathOperator{\sgn}{sgn}

% Notation for differentials
\def\d{\,\mathrm{d}}
\def\dv{\d v}
\def \ddt{\frac{\mathrm{d}}{\mathrm{d}t}}
\def \ddt{\frac{\mathrm{d}}{\mathrm{d}t}}
\def \ddr{\frac{\mathrm{d}}{\mathrm{d}r}}
\newcommand{\sign}{\text{sign}}
\DeclareMathOperator{\hess}{Hess}

% Generate a PDF with hyperlinks in references.
\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue,urlcolor=blue,breaklinks]{hyperref}

% Bibliography
%-----------------------------------------------------------------

% This uses a bibliography style which hyperlinks the paper titles to
% the paper URL specified in the bibtex file. It also uses natbib,
% which cites papers by name such as Euler (1770) instead of [17].
\usepackage{hyperref}
\usepackage{breakurl}
\usepackage[square,sort,comma,numbers]{natbib}
%\usepackage{natbib}
\usepackage{url}
%\bibliographystyle{plainnat-linked}
\bibliographystyle{plain}

%\usepackage[notcite,notref]{showkeys}
%\usepackage{hyperref}
%\usepackage{breakurl}
\usepackage[square,sort,comma,numbers]{natbib}
%\usepackage{natbib}
%\usepackage{url}
%\usepackage[colorlinks=blue,linkcolor=blue,citecolor=blue,urlcolor=blue,breaklinks]{hyperref}
\bibliographystyle{plain}
\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%


\addtolength{\oddsidemargin}{-.875in}
\addtolength{\evensidemargin}{-.875in}
\addtolength{\textwidth}{1.75in}

\addtolength{\topmargin}{-.875in}
\addtolength{\textheight}{1.75in}

% Shortcuts
%-----------------------------------------------------------------

%\newcommand{\abs}[1]{\left\mid#1\right\mid}
%\newcommand{\ap}[1]{\left\langle#1\right\rangle}
%\newcommand{\norm}[1]{\left\mid#1\right\mid}
% \newcommand{\tnorm}[1]{\left\mid\!\left\mid\!\left\mid#1\right\mid\!\right\mid\!\right\mid}

\definecolor{lpink}{rgb}{0.96, 0.76, 0.76}
\definecolor{dpink}{rgb}{0.97, 0.51, 0.47}
\definecolor{sky}{rgb}{0.53, 0.81, 0.92}
\definecolor{salmon}{rgb}{1.0, 0.55, 0.41}
\definecolor{orman}{rgb}{0.24, 0.7, 0.44}
\definecolor{aciksari}{rgb}{0.91, 0.84, 0.42}
\definecolor{dgrey}{rgb}{0.52, 0.52, 0.51}

\def\R{\mathbb{R}}
\def\C{\mathbb{C}}
\def\P{\mathscr{P}}
\def\NN{\mathbb{N}}
\def\Q{\mathbb{Q}}

\def\ird{\int_{\mathbb{R}^N}}
\def\d{\,\mathrm{d}}
\def\dx{\,\mathrm{d}x}
\def\dy{\,\mathrm{d}y}
\def\p{\,\partial}
\newcommand{\en}{\mathcal{H}}
\newcommand{\havva}[1]{{\textcolor{blue}{[\textbf{H:} #1]}}}

% Operators

\def\grad{\nabla}
\def\weakto{\rightharpoonup}

\DeclareMathOperator{\divergence}{div}
%\newcommand{\dv}[1]{\divergence \left(#1\right)}
%
%\DeclareMathOperator{\supp}{supp}
%\DeclareMathOperator{\essup}{ess\,sup}
%\DeclareMathOperator{\Lip}{Lip}
\DeclareMathOperator{\law}{law}

\DeclareMathOperator{\Pf}{Pf.}
\DeclareMathOperator{\Fp}{Fp.}
\DeclareMathOperator{\pv}{pv.}

\newcommand{\for}{\quad \text{ for all }}
\newcommand{\tb}[1]{\textcolor{blue}{#1}}


\newcommand{\OmT}{\Omega\times (0,T)}
\let\pa\partial
\let\na\nabla
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\cD}{\mathcal{D}}
\let\eps\varepsilon
\newcommand{\wen}{w^{(\varepsilon,N)}}
\newcommand{\OmTc}{\overline{\Omega}\times [0,T]}
\newcommand{\rrhoA}{\sqrt{\rho_A}}
\newcommand{\rrhoB}{\sqrt{\rho_B}}
\newcommand{\rrhoAB}{\sqrt{\rho_A\rho_B}}

% Theorems
%-----------------------------------------------------------------
\newtheorem{thm}{Theorem}[section]
% \newtheorem{thm}{Theorem}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prp}[thm]{Proposition}
\newtheorem{claim}[thm]{Claim}
% \newtheorem{hyp}[thm]{Hypothesis}
\newtheorem{hyp}{Hypothesis}
\theoremstyle{definition}
\newtheorem{dfn}[thm]{Definition}
\theoremstyle{remark}
\newtheorem{remark}[thm]{Remark}
\newtheorem{ex}[thm]{Example}
\newtheorem{q}[thm]{Question}

\newenvironment{ans}{\paragraph{Answer:}}{\hfill$\square$ \vspace{20pt}}

\hypersetup{pdftitle={Measure Theory}}
\hypersetup{pdfauthor={Josephine Evans }}


\author{
Josephine Evans
}
\title{Measure Theory: Assignment Two - Step functions and continuous functions are dense in $L^p$}
%\date{}

\makeindex

\begin{document}
\section{Measure Theory: Assignment  - Constructing new measurable functions from old measurable functions}
First let us have a definition

\textbf{Definition}
We call $\phi$ a step function if we can write $\phi$ in the form $\phi(x) = \sum_{k=1}^n a_k 1_{(c_k,d_k]}$ where $a_k,c_k$ and $d_k$ are real numbers. 

The goal of this sheet is to show we can approximate functions in $L^p(\mathbb{R})$ by step functions. We do this in three steps, one for each question.
\begin{q}
Let $f$ be a non-negative measurable function in $L^p(\mathbb{R})$ for $p \in [1,\infty)$ by considering the functions $f_{n,m}(x) = f(x)1_{|x| \leq n}1_{f(x) \leq m}$, or otherwise, show that for every $\epsilon >0$ there is a function $g$ where $g$ is a bounded, non-negative, measurable function that is 0 outside some closed bounded interval and $\|g-f\|_p \leq \epsilon$. \emph{7 marks}
\end{q}
\begin{ans}
Let us look at the sequence $f_{n,n}$ then we know that $f_{n,n} \rightarrow f$ pointwise and $|f_{n,n}-f|^p \leq |f|^p$ therefore by dominated convergence $\|f_{n,n} -f \|_p \rightarrow 0$. Hence there exists some $n$ such that $\|f_{n,n}-f\|_p \leq \epsilon$, and for every $n$ we have $f_{n,n}$ is bounded and has support in a bounded interval.
\end{ans}

\begin{q}
Let $g$ be a non-negative, bounded, measurable function whose support is contained inside $[-M,M]$ for some $M<\infty$. Show that for any fixed $\epsilon >0$ there is a \emph{simple function}, $h$ whose support is inside a closed bounded interval, such that $\|g-h\|_p < \epsilon$. \emph{7 marks}
\end{q}
\begin{ans}
Take the standard approximation $g_n(x) = 2^{-n}\lfloor 2^n g(x) \rfloor$ then by the previous assignment $g_n$ is a simple function and $|g_n(x) - g(x)| \leq 2^{-n}$ then $\|g_n -g\|_p \leq 2^{-np+1}M \rightarrow 0$ therefore we can find $n$ large enough so that $\|g_n -g\|_p \leq \epsilon$. We also have that $g_n(x) = 0$ whenever $g(x) = 0$ so our approximation is also 0 outside $[-M, M]$.  
\end{ans}

\begin{q}
Suppose that $A$ is a bounded Lebesgue measurable set, show that, given $\epsilon >0$ there is a finite collection of disjoint, half open intervals $I_k$ such that $\|1_A - \sum_{k=1}^n 1_{I_k}\|_p < \epsilon$ \emph{Hint: look at the non credit exercise sheet from week 2}. Use this to show that if $h$ is a simple function whose support is contained in $[-M, M]$ then there is a \emph{step function}, $\phi$, such that $\|h-\phi\|_p < \epsilon$. You may use Minkowski's inequality which says that $\|f_1+f_2\|_p \leq \|f_1\|_p + \|f_2\|_p$. \emph{7 marks}
\end{q}
\begin{ans}
By the definition of Lebesgue outer measure and the fact that $A$ is Lebesgue measureable we have that there exists a countable sequence of intervals with 
\[ \sum_n \lambda(I_n) \leq \lambda(A) + \epsilon/2, \] and $A \subseteq \bigcup_n I_n$. Also as $\sum_n \lambda(I_n) < \infty$ there exists an $N$ such that $\sum_{n = N+1}^\infty \lambda(I_n) < \epsilon/2$. Then 
\[ \lambda( \left(\bigcup_{n=1}^N I_n \right) \Delta A) \leq \lambda( \bigcup_n I_n \setminus A) + \lambda( \bigcup_{n=N+1}^\infty I_n) \leq \epsilon. \] This is because $ \bigcup_{n=1}^N I_n \setminus A \subseteq \bigcup_n I_n \setminus A$ and $A \setminus \bigcup_{n=1}^N \subseteq \bigcup_n I_n \setminus \bigcup_{n=1}^N I_n$. Then
\[ \| 1_A - 1_{\bigcup_{n=1}^N I_n} \|_p \leq \lambda(A \Delta \bigcup_{n=1}^N I_n)^{1/p} \leq \epsilon^{1/p} \] so we can make this arbitrarily small.  Now if we have a simple function $h$ whose support is contained in a bounded set we can write $h = \sum_{k=1}^n a_k 1_{A_k}$ and we will have $\lambda(A_k) < \infty$ as we are contained in a bounded set. Therefore we can find $I_{k,j}$ a finite collection of intervals for each $k$ such that $\| 1_{A_k} - 1_{ \bigcup_j I_{k,j}}\|_p \leq \epsilon/a_k$ and wlog the $I_{k,j}$ are disjoint in $j$ (for each $k$ we have a disjoint finite collection). Then we can define
\[ \phi = \sum_{k=1}^n a_k \sum_j 1_{I_{k,j}}. \] This is a step function and using Minkowski's inequality we have
\[ \| h - \phi\|_p \leq \sum_k a_k \| 1_{A_k} - \sum_j I_{k,j}\|_p \leq \epsilon. \] 
\end{ans}

\begin{q}
Now show that for any (not necessarily non-negative) function $f \in L^p(\mathbb{R})$ with $p \in [1, \infty)$, and for any $\epsilon$ there exists a step function $\phi$ with $\|\phi  - f\|_p \leq \epsilon$. (Note that step functions don't have to be positive). \emph{4 marks}
\end{q}
\begin{ans}
Now suppose $f$ is positive then there exists $g$ which is bounded and with support contained in a bounded interval such that $\|f-g\|_p \leq \epsilon/3$ and we can find $h$ simple such that $\|h-g\|_p \leq \epsilon/3$ and then $\phi$ a step function such that $\|h-\phi\|_p \leq \epsilon/3$. Therefore by Minkowski $\|f-\phi\| \leq \|f-g\|_p + \|g-h\|_p + \|h - \phi\|_p \leq \epsilon$. 

Now suppose that $f$ is not necessarily non-negative we can write $f = f_+ - f_-$ and there exist step functions $\phi_+$ and $\phi_-$ such that $\|f_+ - \phi_+\|_p \leq \epsilon/2$ and $\|f_- - \phi_-\|_p \leq \epsilon/2$. Therefore, if we set $\phi = \phi_+ - \phi_-$ we have $\|f-\phi\|_p \leq \|f_+ - \phi_+\|_p + \| f_- - \phi_-\|_p \leq \epsilon$ so we are done.
\end{ans}


\end{document}